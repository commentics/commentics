window.addEventListener("load",function(t){var a=document.getElementById("cmtx_js_settings_page");if(a&&(a=a.innerHTML,0!=(a=JSON.parse(a)).auto_detect))var n=setInterval(function(){if(clearInterval(n),window.jQuery)var t=1;else t=0;var e=a.commentics_url+"frontend/index.php?route=main/page/autodetect&jquery="+t,r=new XMLHttpRequest;r.open("GET",e,!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send(),t||(document.getElementsByTagName("body")[0].insertAdjacentHTML("afterbegin",'<div class="cmtx_overlay"></div>'),document.getElementsByClassName("cmtx_overlay")[0].style.display="block",document.getElementById("cmtx_autodetect_modal").style.display="block")},5e3)}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&"object"==typeof module.exports?t(require("jquery")):t(jQuery)}(function(l){l.timeago=function(t){return t instanceof Date?c(t):c("string"==typeof t?l.timeago.parse(t):"number"==typeof t?new Date(t):l.timeago.datetime(t))};var r=l.timeago;l.extend(l.timeago,{settings:{refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,autoDispose:!0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:"any moment now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(n){if(!this.settings.allowPast&&!this.settings.allowFuture)throw"timeago allowPast and allowFuture settings can not both be set to false.";var c=this.settings.strings,t=c.prefixAgo,e=c.suffixAgo;if(this.settings.allowFuture&&n<0&&(t=c.prefixFromNow,e=c.suffixFromNow),!this.settings.allowPast&&0<=n)return this.settings.strings.inPast;var r=Math.abs(n)/1e3,a=r/60,o=a/60,s=o/24,m=s/365;function _(t,e){var r=l.isFunction(t)?t(e,n):t,a=c.numbers&&c.numbers[e]||e;return r.replace(/%d/i,a)}var i=r<45&&_(c.seconds,Math.round(r))||r<90&&_(c.minute,1)||a<45&&_(c.minutes,Math.round(a))||a<90&&_(c.hour,1)||o<24&&_(c.hours,Math.round(o))||o<42&&_(c.day,1)||s<30&&_(c.days,Math.round(s))||s<45&&_(c.month,1)||s<365&&_(c.months,Math.round(s/30))||m<1.5&&_(c.year,1)||_(c.years,Math.round(m)),u=c.wordSeparator||"";return void 0===c.wordSeparator&&(u=" "),l.trim([t,i,e].join(u))},parse:function(t){var e=l.trim(t);return e=(e=(e=(e=(e=e.replace(/\.\d+/,"")).replace(/-/,"/").replace(/-/,"/")).replace(/T/," ").replace(/Z/," UTC")).replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2")).replace(/([\+\-]\d\d)$/," $100"),new Date(e)},datetime:function(t){var e=r.isTime(t)?l(t).attr("datetime"):l(t).attr("title");return r.parse(e)},isTime:function(t){return"time"===l(t).get(0).tagName.toLowerCase()}});var a={init:function(){a.dispose.call(this);var t=l.proxy(n,this);t();var e=r.settings;0<e.refreshMillis&&(this._timeagoInterval=setInterval(t,e.refreshMillis))},update:function(t){var e=t instanceof Date?t:r.parse(t);l(this).data("timeago",{datetime:e}),r.settings.localeTitle&&l(this).attr("title",e.toLocaleString()),n.apply(this)},updateFromDOM:function(){l(this).data("timeago",{datetime:r.parse(r.isTime(this)?l(this).attr("datetime"):l(this).attr("title"))}),n.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};function n(){var t=r.settings;if(t.autoDispose&&!l.contains(document.documentElement,this))return l(this).timeago("dispose"),this;var e=function(t){if(!(t=l(t)).data("timeago")){t.data("timeago",{datetime:r.datetime(t)});var e=l.trim(t.text());r.settings.localeTitle?t.attr("title",t.data("timeago").datetime.toLocaleString()):!(0<e.length)||r.isTime(t)&&t.attr("title")||t.attr("title",e)}return t.data("timeago")}(this);return isNaN(e.datetime)||(0===t.cutoff||Math.abs(o(e.datetime))<t.cutoff?l(this).text(c(e.datetime)):0<l(this).attr("title").length&&l(this).text(l(this).attr("title"))),this}function c(t){return r.inWords(o(t))}function o(t){return(new Date).getTime()-t.getTime()}l.fn.timeago=function(t,e){var r=t?a[t]:a.init;if(!r)throw new Error("Unknown function name '"+t+"' for timeago");return this.each(function(){r.call(this,e)}),this},document.createElement("abbr"),document.createElement("time")});var cmtx_wait_for_jquery=setInterval(function(){window.jQuery&&(clearInterval(cmtx_wait_for_jquery),jQuery(document).ready(function(){var t;if(jQuery("#cmtx_js_settings_form").length&&(cmtx_js_settings_form=JSON.parse(jQuery("#cmtx_js_settings_form").text())),jQuery("#cmtx_js_settings_comments").length&&(cmtx_js_settings_comments=JSON.parse(jQuery("#cmtx_js_settings_comments").text())),jQuery("#cmtx_js_settings_notify").length&&(cmtx_js_settings_notify=JSON.parse(jQuery("#cmtx_js_settings_notify").text())),jQuery("#cmtx_js_settings_online").length&&(cmtx_js_settings_online=JSON.parse(jQuery("#cmtx_js_settings_online").text())),jQuery("#cmtx_js_settings_user").length&&(cmtx_js_settings_user=JSON.parse(jQuery("#cmtx_js_settings_user").text())),isInIframe=window.location!=window.parent.location,jQuery("#cmtx_container span[data-cmtx-target-modal]").click(function(t){t.preventDefault();var e=jQuery(this).attr("data-cmtx-target-modal");if(jQuery("body").append(jQuery(e)),jQuery("body").append('<div class="cmtx_overlay"></div>'),isInIframe){var r=jQuery(".cmtx_bb_code_container").offset();jQuery(jQuery(e)).css({top:r.top+150}),jQuery(".cmtx_overlay").css("background-color","transparent")}jQuery(".cmtx_overlay").fadeIn(200),jQuery(e).fadeIn(200)}),jQuery('#cmtx_container label[for="cmtx_privacy"] a, #cmtx_container label[for="cmtx_terms"] a').click(function(t){t.preventDefault();var e=jQuery(this).parent().parent().attr("data-cmtx-target-modal");if(jQuery("body").append(jQuery(e)),jQuery("body").append('<div class="cmtx_overlay"></div>'),isInIframe){var r=jQuery(".cmtx_checkbox_container").offset();jQuery(jQuery(e)).css({top:r.top-150}),jQuery(".cmtx_overlay").css("background-color","transparent")}jQuery(".cmtx_overlay").fadeIn(200),jQuery(e).fadeIn(200)}),jQuery("#cmtx_container").on("click",".cmtx_flag_link",function(t){t.preventDefault();var e=jQuery(this).closest(".cmtx_comment_box").attr("data-cmtx-comment-id");if(jQuery("#cmtx_flag_modal_yes").attr("data-cmtx-comment-id",e),0===jQuery("body > #cmtx_flag_modal").length&&jQuery("body").append(jQuery("#cmtx_flag_modal")),jQuery("body").append('<div class="cmtx_overlay"></div>'),isInIframe){var r=jQuery(this).offset();jQuery("#cmtx_flag_modal").css({top:r.top-150}),jQuery(".cmtx_overlay").css("background-color","transparent")}jQuery(".cmtx_overlay").fadeIn(200),jQuery("#cmtx_flag_modal").fadeIn(200)}),jQuery("body").on("click",".cmtx_modal_box .cmtx_button_secondary",function(t){t.preventDefault(),jQuery(".cmtx_modal_close").trigger("click")}),jQuery("body").on("click",".cmtx_modal_close, .cmtx_overlay",function(t){t.preventDefault(),jQuery(".cmtx_modal_box, .cmtx_overlay").fadeOut(200,function(){jQuery(".cmtx_overlay").remove()})}),""==jQuery(".cmtx_form_container select").find("option:selected").val()&&(jQuery(".cmtx_form_container select").css("color","#666"),jQuery(".cmtx_form_container select").children().css("color","black")),jQuery("body").on("change",".cmtx_form_container select",function(){""==jQuery(this).find("option:selected").val()?jQuery(this).css("color","#666"):jQuery(this).css("color","black"),jQuery(this).children().css("color","black")}),jQuery("#cmtx_comment").focus(function(){jQuery(this).addClass("cmtx_comment_field_active"),jQuery(".cmtx_comment_container").addClass("cmtx_comment_container_active"),""==jQuery('input[name="cmtx_reply_to"]').val()&&jQuery(".cmtx_wait_for_comment").fadeIn("slow")}),"undefined"!=typeof cmtx_js_settings_form&&(cmtx_js_settings_form.cmtx_wait_for_comment||(jQuery("#cmtx_comment").addClass("cmtx_comment_field_active"),jQuery(".cmtx_comment_container").addClass("cmtx_comment_container_active"),""==jQuery('input[name="cmtx_reply_to"]').val()&&jQuery(".cmtx_wait_for_comment").fadeIn("slow"))),jQuery("#cmtx_name, #cmtx_email").focus(function(){""==jQuery('input[name="cmtx_subscribe"]').val()&&jQuery(".cmtx_wait_for_user").fadeIn("slow")}),jQuery(".cmtx_bb_code:not([data-cmtx-target-modal])").click(function(){var t=jQuery(this).attr("data-cmtx-tag");t&&(void 0===(t=t.split("|"))[1]?cmtx_add_tag("",t[0]):cmtx_add_tag(t[0],t[1]))}),jQuery(".cmtx_smilies_container .cmtx_smiley").click(function(){cmtx_add_tag("",jQuery(this).attr("data-cmtx-tag"))}),jQuery("#cmtx_bullet_modal_insert").click(function(t){var e=jQuery(".cmtx_bb_code_bullet").attr("data-cmtx-tag");e=e.split("|");var r="";jQuery('#cmtx_bullet_modal input[type="text"]').each(function(){var t=cmtxTrim(jQuery(this).val());null!=t&&""!=t&&(r+=e[1]+t+e[2]+"\r\n")}),null!=r&&""!=r&&cmtx_add_tag("",r=e[0]+"\r\n"+r+e[3]),jQuery('#cmtx_bullet_modal input[type="text"]').val(""),jQuery(".cmtx_modal_close").trigger("click")}),jQuery("#cmtx_numeric_modal_insert").click(function(t){var e=jQuery(".cmtx_bb_code_numeric").attr("data-cmtx-tag");e=e.split("|");var r="";jQuery('#cmtx_numeric_modal input[type="text"]').each(function(){var t=cmtxTrim(jQuery(this).val());null!=t&&""!=t&&(r+=e[1]+t+e[2]+"\r\n")}),null!=r&&""!=r&&cmtx_add_tag("",r=e[0]+"\r\n"+r+e[3]),jQuery('#cmtx_numeric_modal input[type="text"]').val(""),jQuery(".cmtx_modal_close").trigger("click")}),jQuery("#cmtx_link_modal_insert").click(function(t){var e=jQuery(".cmtx_bb_code_link").attr("data-cmtx-tag");e=e.split("|");var r=cmtxTrim(jQuery('#cmtx_link_modal input[type="url"]').val());if(null!=r&&""!=r&&"http://"!=r){var a=cmtxTrim(jQuery('#cmtx_link_modal input[type="text"]').val());if(null!=a&&""!=a)var n=e[1]+r+e[2]+a+e[3];else n=e[0]+r+e[3];cmtx_add_tag("",n)}jQuery('#cmtx_link_modal input[type="url"]').val("http://"),jQuery('#cmtx_link_modal input[type="text"]').val(""),jQuery(".cmtx_modal_close").trigger("click")}),jQuery("#cmtx_email_modal_insert").click(function(t){var e=jQuery(".cmtx_bb_code_email").attr("data-cmtx-tag");e=e.split("|");var r=cmtxTrim(jQuery('#cmtx_email_modal input[type="email"]').val());if(null!=r&&""!=r){var a=cmtxTrim(jQuery('#cmtx_email_modal input[type="text"]').val());if(null!=a&&""!=a)var n=e[1]+r+e[2]+a+e[3];else n=e[0]+r+e[3];cmtx_add_tag("",n)}jQuery('#cmtx_email_modal input[type="email"]').val(""),jQuery('#cmtx_email_modal input[type="text"]').val(""),jQuery(".cmtx_modal_close").trigger("click")}),jQuery("#cmtx_image_modal_insert").click(function(t){var e=jQuery(".cmtx_bb_code_image").attr("data-cmtx-tag");e=e.split("|");var r=cmtxTrim(jQuery('#cmtx_image_modal input[type="url"]').val());null!=r&&""!=r&&"http://"!=r&&cmtx_add_tag("",e[0]+r+e[1]);jQuery('#cmtx_image_modal input[type="url"]').val("http://"),jQuery(".cmtx_modal_close").trigger("click")}),jQuery("#cmtx_youtube_modal_insert").click(function(t){var e=jQuery(".cmtx_bb_code_youtube").attr("data-cmtx-tag");e=e.split("|");var r=cmtxTrim(jQuery('#cmtx_youtube_modal input[type="url"]').val());null!=r&&""!=r&&"http://"!=r&&cmtx_add_tag("",e[0]+r+e[1]);jQuery('#cmtx_youtube_modal input[type="url"]').val("http://"),jQuery(".cmtx_modal_close").trigger("click")}),jQuery("#cmtx_comment").keyup(function(t){cmtxUpdateCommentCounter()}),cmtxUpdateCommentCounter(),jQuery('input[type="radio"][name="cmtx_rating"]').on("click",function(){jQuery(this).is(".cmtx_rating_active")?jQuery(this).prop("checked",!1).removeClass("cmtx_rating_active"):(jQuery('input[type="radio"][name="cmtx_rating"].cmtx_rating_active').removeClass("cmtx_rating_active"),jQuery(this).addClass("cmtx_rating_active"))}),"undefined"!=typeof cmtx_js_settings_form&&cmtx_js_settings_form.enabled_upload){function e(t){if(jQuery(".cmtx_upload_container").removeClass("cmtx_dragging"),t){var r=parseFloat((t.size/1024/1024).toFixed(2)),e=t.name.split(".").pop().toLowerCase();if(function(t,e){var r=jQuery(".cmtx_image_upload").length,a=0;if(jQuery(".cmtx_image_upload").each(function(){a=Number(a)+Number(jQuery(this).find("img").attr("data-cmtx-size"))}),a=Number(a)+Number(t),r>=cmtx_js_settings_form.maximum_upload_amount){if(jQuery("#cmtx_upload_modal .cmtx_modal_body").html('<span class="cmtx_icon cmtx_alert_icon" aria-hidden="true"></span> '+cmtx_js_settings_form.lang_error_file_num.replace("%d",cmtx_js_settings_form.maximum_upload_amount)),jQuery("body").append(jQuery("#cmtx_upload_modal")),jQuery("body").append('<div class="cmtx_overlay"></div>'),isInIframe){var n=jQuery(".cmtx_upload_container").offset();jQuery("#cmtx_upload_modal").css({top:n.top+50}),jQuery(".cmtx_overlay").css("background-color","transparent")}return jQuery(".cmtx_overlay").fadeIn(200),jQuery("#cmtx_upload_modal").fadeIn(200),!1}if(t>cmtx_js_settings_form.maximum_upload_size){if(jQuery("#cmtx_upload_modal .cmtx_modal_body").html('<span class="cmtx_icon cmtx_alert_icon" aria-hidden="true"></span> '+cmtx_js_settings_form.lang_error_file_size.replace("%.1f",cmtx_js_settings_form.maximum_upload_size)),jQuery("body").append(jQuery("#cmtx_upload_modal")),jQuery("body").append('<div class="cmtx_overlay"></div>'),isInIframe){n=jQuery(".cmtx_upload_container").offset();jQuery("#cmtx_upload_modal").css({top:n.top+50}),jQuery(".cmtx_overlay").css("background-color","transparent")}return jQuery(".cmtx_overlay").fadeIn(200),jQuery("#cmtx_upload_modal").fadeIn(200),!1}if(a>cmtx_js_settings_form.maximum_upload_total){if(jQuery("#cmtx_upload_modal .cmtx_modal_body").html('<span class="cmtx_icon cmtx_alert_icon" aria-hidden="true"></span> '+cmtx_js_settings_form.lang_error_file_total.replace("%.1f",cmtx_js_settings_form.maximum_upload_total)),jQuery("body").append(jQuery("#cmtx_upload_modal")),jQuery("body").append('<div class="cmtx_overlay"></div>'),isInIframe){n=jQuery(".cmtx_upload_container").offset();jQuery("#cmtx_upload_modal").css({top:n.top+50}),jQuery(".cmtx_overlay").css("background-color","transparent")}return jQuery(".cmtx_overlay").fadeIn(200),jQuery("#cmtx_upload_modal").fadeIn(200),!1}if(-1!=jQuery.inArray(e,["gif","jpg","jpeg","png"]))return!0;if(jQuery("#cmtx_upload_modal .cmtx_modal_body").html('<span class="cmtx_icon cmtx_alert_icon" aria-hidden="true"></span> '+cmtx_js_settings_form.lang_error_file_type),jQuery("body").append(jQuery("#cmtx_upload_modal")),jQuery("body").append('<div class="cmtx_overlay"></div>'),isInIframe){n=jQuery(".cmtx_upload_container").offset();jQuery("#cmtx_upload_modal").css({top:n.top+50}),jQuery(".cmtx_overlay").css("background-color","transparent")}return jQuery(".cmtx_overlay").fadeIn(200),jQuery("#cmtx_upload_modal").fadeIn(200),!1}(r,e)){var a=new FileReader;a.onload=function(t){var e=t.target.result;template="",template+='<div class="cmtx_image_upload">',template+='    <div class="cmtx_image_section">',template+='        <img src="'+e+'" draggable="false" data-cmtx-size="'+r+'">',template+='        <span class="cmtx_image_overlay">'+r+" MB</span>",template+="    </div>",template+='    <div class="cmtx_button_section">',template+='        <button type="button" class="cmtx_button cmtx_button_remove" title="'+cmtx_js_settings_form.lang_button_remove+'">'+cmtx_js_settings_form.lang_button_remove+"</button>",template+="    </div>",template+="</div>",jQuery(".cmtx_image_container").append(template),jQuery(".cmtx_image_row").show()},a.readAsDataURL(t)}}}total_size=0,jQuery("#cmtx_upload").change(function(t){t.preventDefault(),t.stopPropagation(),e(jQuery("#cmtx_upload")[0].files[0])}),jQuery(".cmtx_upload_container").bind("dragenter",function(t){t.preventDefault(),t.stopPropagation()}),jQuery(".cmtx_upload_container").bind("dragover",function(t){t.preventDefault(),t.stopPropagation(),jQuery(".cmtx_upload_container").addClass("cmtx_dragging")}),jQuery(".cmtx_upload_container").bind("dragleave",function(t){t.preventDefault(),t.stopPropagation(),jQuery(".cmtx_upload_container").removeClass("cmtx_dragging")}),jQuery("body").on("click",".cmtx_button_remove",function(t){t.preventDefault(),jQuery(this).closest(".cmtx_image_upload").remove(),0==jQuery(".cmtx_image_upload").length&&jQuery(".cmtx_image_row").hide()}),jQuery("body").on("drop","#cmtx_upload",function(t){t.preventDefault(),t.stopPropagation(),t.originalEvent.dataTransfer&&t.originalEvent.dataTransfer.files.length&&e(t.originalEvent.dataTransfer.files[0])})}"undefined"!=typeof cmtx_js_settings_form&&cmtx_js_settings_form.enabled_country&&((t=jQuery.ajax({type:"POST",cache:!1,url:cmtx_js_settings_form.commentics_url+"frontend/index.php?route=main/form/getCountries",dataType:"json",beforeSend:function(){jQuery("#cmtx_country").html('<option value="">'+cmtx_js_settings_form.lang_text_loading+"</option>")}})).done(function(t){setTimeout(function(){if(countries=t,html='<option value="" hidden>'+cmtx_js_settings_form.lang_placeholder_country+"</option>",countries.length)for(i=0;i<countries.length;i++)html+='<option value="'+countries[i].id+'"',"---"==countries[i].name?html+=" disabled":countries[i].id==cmtx_js_settings_form.country_id&&(html+=" selected"),html+=">"+countries[i].name+"</option>";jQuery("#cmtx_country").html(html),cmtx_js_settings_form.enabled_state&&jQuery("#cmtx_country").trigger("change")},500)}),t.fail(function(t,e,r){console&&console.log&&console.log(t.responseText)}));"undefined"!=typeof cmtx_js_settings_form&&cmtx_js_settings_form.enabled_country&&cmtx_js_settings_form.enabled_state&&(jQuery("#cmtx_country").bind("change",function(){var t=encodeURIComponent(jQuery("#cmtx_country").val());if(t){var e=jQuery.ajax({type:"POST",cache:!1,url:cmtx_js_settings_form.commentics_url+"frontend/index.php?route=main/form/getStates",data:"country_id="+t,dataType:"json",beforeSend:function(){jQuery("#cmtx_state").html('<option value="">'+cmtx_js_settings_form.lang_text_loading+"</option>")}});e.done(function(t){setTimeout(function(){if(states=t,html='<option value="" hidden>'+cmtx_js_settings_form.lang_placeholder_state+"</option>",states.length)for(i=0;i<states.length;i++)html+='<option value="'+states[i].id+'"',states[i].id==cmtx_js_settings_form.state_id&&(html+=" selected"),html+=">"+states[i].name+"</option>";else html+='<option value="" disabled>'+cmtx_js_settings_form.lang_text_country_first+"</option>";jQuery("#cmtx_state").html(html),jQuery("#cmtx_state").trigger("change")},500)}),e.fail(function(t,e,r){console&&console.log&&console.log(t.responseText)})}else html='<option value="" hidden>'+cmtx_js_settings_form.lang_placeholder_state+"</option>",html+='<option value="" disabled>'+cmtx_js_settings_form.lang_text_country_first+"</option>",jQuery("#cmtx_state").html(html)}),jQuery("#cmtx_country").trigger("change")),"undefined"==typeof cmtx_js_settings_form||!cmtx_js_settings_form.enabled_country&&cmtx_js_settings_form.enabled_state&&((t=jQuery.ajax({type:"POST",cache:!1,url:cmtx_js_settings_form.commentics_url+"frontend/index.php?route=main/form/getStates",data:"country_id=0",dataType:"json",beforeSend:function(){jQuery("#cmtx_state").html('<option value="">'+cmtx_js_settings_form.lang_text_loading+"</option>")}})).done(function(t){setTimeout(function(){if(states=t,html='<option value="" hidden>'+cmtx_js_settings_form.lang_placeholder_state+"</option>",states.length)for(i=0;i<states.length;i++)html+='<option value="'+states[i].id+'"',states[i].id==cmtx_js_settings_form.state_id&&(html+=" selected"),html+=">"+states[i].name+"</option>";jQuery("#cmtx_state").html(html),jQuery("#cmtx_state").trigger("change")},500)}),t.fail(function(t,e,r){console&&console.log&&console.log(t.responseText)}));function n(){jQuery(".cmtx_message, .cmtx_error, .cmtx_subscribe_row").remove(),jQuery(".cmtx_field, .cmtx_rating").removeClass("cmtx_field_error"),jQuery(".cmtx_icons_row, .cmtx_comment_row, .cmtx_counter_row, .cmtx_headline_row, .cmtx_upload_row, .cmtx_rating_row, .cmtx_website_row, .cmtx_geo_row, .cmtx_question_row, .cmtx_captcha_row, .cmtx_checkbox_container, .cmtx_button_row").show(),jQuery("#cmtx_comment").addClass("cmtx_comment_field_active"),jQuery(".cmtx_comment_container").addClass("cmtx_comment_container_active"),jQuery(".cmtx_form_heading").text(cmtx_heading_text),jQuery('input[name="cmtx_subscribe"]').val("")}if("undefined"!=typeof cmtx_js_settings_form&&cmtx_js_settings_form.captcha&&jQuery("#cmtx_captcha_refresh").click(function(){var t=cmtx_js_settings_form.captcha_url+"&"+Math.random();jQuery("#cmtx_captcha_image").attr("src",t)}),jQuery("#cmtx_submit_button, #cmtx_preview_button").click(function(t){t.preventDefault(),jQuery(".cmtx_upload_field").remove(),jQuery(".cmtx_image_upload").each(function(){var t=jQuery(this).find("img").attr("src");jQuery("#cmtx_form").append('<input type="hidden" name="cmtx_upload[]" class="cmtx_upload_field" value="'+t+'">')});var e=jQuery("#cmtx_form").find(":input:disabled").removeAttr("disabled"),r=jQuery("#cmtx_form").serialize();e.attr("disabled","disabled");var a=jQuery.ajax({type:"POST",cache:!1,url:cmtx_js_settings_form.commentics_url+"frontend/index.php?route=main/form/submit",data:r+"&cmtx_page_id="+encodeURIComponent(cmtx_js_settings_form.page_id)+"&cmtx_type="+encodeURIComponent(jQuery(this).attr("data-cmtx-type"))+jQuery("#cmtx_hidden_data").val(),dataType:"json",beforeSend:function(){jQuery("#cmtx_submit_button, #cmtx_preview_button").val(cmtx_js_settings_form.lang_button_processing),jQuery("#cmtx_submit_button, #cmtx_preview_button").prop("disabled",!0),jQuery("#cmtx_submit_button, #cmtx_preview_button").addClass("cmtx_button_disabled")}});a.always(function(){jQuery("#cmtx_submit_button").val(cmtx_js_settings_form.lang_button_submit),jQuery("#cmtx_preview_button").val(cmtx_js_settings_form.lang_button_preview),jQuery("#cmtx_submit_button, #cmtx_preview_button").prop("disabled",!1),jQuery("#cmtx_submit_button, #cmtx_preview_button").removeClass("cmtx_button_disabled"),jQuery("#cmtx_comment").addClass("cmtx_comment_field_active"),jQuery(".cmtx_comment_container").addClass("cmtx_comment_container_active"),jQuery(".cmtx_wait_for_user, .cmtx_wait_for_comment").not(".cmtx_headline_row, .cmtx_rating_row").fadeIn("slow"),""==jQuery('input[name="cmtx_reply_to"]').val()&&(jQuery(".cmtx_headline_row").fadeIn("slow"),jQuery(".cmtx_rating_row").fadeIn("slow"))}),a.done(function(t){jQuery(".cmtx_message:not(.cmtx_message_reply), .cmtx_error").remove(),jQuery(".cmtx_field, .cmtx_rating").removeClass("cmtx_field_error"),t.result.preview?(jQuery("#cmtx_preview").html(t.result.preview),cmtxHighlightCode()):jQuery("#cmtx_preview").html(""),t.result.success&&(jQuery(".cmtx_message").remove(),jQuery('#cmtx_comment, #cmtx_headline, #cmtx_answer, [name^="cmtx_field_"], #cmtx_captcha').val(""),cmtxUpdateCommentCounter(),jQuery(".cmtx_image_upload").remove(),jQuery(".cmtx_image_row").hide(),jQuery('input[name="cmtx_rating"]').prop("checked",!1).removeClass("cmtx_rating_active"),t.hide_rating&&jQuery(".cmtx_rating_row").remove(),jQuery("#cmtx_captcha_refresh").trigger("click"),"undefined"!=typeof grecaptcha&&grecaptcha.reset(),jQuery('input[name="cmtx_reply_to"]').val(""),jQuery(".cmtx_message_reply").remove(),jQuery("#cmtx_form").before('<div class="cmtx_message cmtx_message_success">'+t.result.success+"</div>"),jQuery(".cmtx_message_success").fadeIn(1500),t.user_link&&(jQuery("#cmtx_form").before('<div class="cmtx_message cmtx_message_info">'+t.user_link+"</div>"),jQuery(".cmtx_message_info").fadeIn(1500)),cmtxRefreshComments({commentics_url:cmtx_js_settings_form.commentics_url,page_id:cmtx_js_settings_form.page_id,page_number:"",sort_by:"",search:"",effect:!1}));if(t.result.error){for(var e in t.error.comment&&(jQuery("#cmtx_comment").addClass("cmtx_field_error"),jQuery("#cmtx_comment").after('<span class="cmtx_error">'+t.error.comment+"</span>")),t.error.headline&&(jQuery("#cmtx_headline").addClass("cmtx_field_error"),jQuery("#cmtx_headline").after('<span class="cmtx_error">'+t.error.headline+"</span>")),t.error.name&&(jQuery("#cmtx_name").addClass("cmtx_field_error"),jQuery("#cmtx_name").after('<span class="cmtx_error">'+t.error.name+"</span>")),t.error.email&&(jQuery("#cmtx_email").addClass("cmtx_field_error"),jQuery("#cmtx_email").after('<span class="cmtx_error">'+t.error.email+"</span>")),t.error.rating&&(jQuery("#cmtx_rating").addClass("cmtx_field_error"),jQuery("#cmtx_rating").after('<span class="cmtx_error">'+t.error.rating+"</span>")),t.error.website&&(jQuery("#cmtx_website").addClass("cmtx_field_error"),jQuery("#cmtx_website").after('<span class="cmtx_error">'+t.error.website+"</span>")),t.error.town&&(jQuery("#cmtx_town").addClass("cmtx_field_error"),jQuery("#cmtx_town").after('<span class="cmtx_error">'+t.error.town+"</span>")),t.error.country&&(jQuery("#cmtx_country").addClass("cmtx_field_error"),jQuery("#cmtx_country").after('<span class="cmtx_error">'+t.error.country+"</span>")),t.error.state&&(jQuery("#cmtx_state").addClass("cmtx_field_error"),jQuery("#cmtx_state").after('<span class="cmtx_error">'+t.error.state+"</span>")),t.error.answer&&(jQuery("#cmtx_answer").addClass("cmtx_field_error"),jQuery("#cmtx_answer").after('<span class="cmtx_error">'+t.error.answer+"</span>")),t.error)e.startsWith("cmtx_field_")&&(jQuery('[name="'+e+'"]').addClass("cmtx_field_error"),jQuery('[name="'+e+'"]').after('<span class="cmtx_error">'+t.error[e]+"</span>"));t.error.recaptcha&&(jQuery("#g-recaptcha").after('<span class="cmtx_error">'+t.error.recaptcha+"</span>"),grecaptcha.reset()),t.error.captcha&&(jQuery("#cmtx_captcha").addClass("cmtx_field_error"),jQuery("#cmtx_captcha").after('<span class="cmtx_error">'+t.error.captcha+"</span>"),jQuery("#cmtx_captcha_refresh").trigger("click"),jQuery("#cmtx_captcha").val("")),jQuery("#cmtx_form").before('<div class="cmtx_message cmtx_message_error">'+t.result.error+"</div>"),jQuery(".cmtx_message_error, .cmtx_container_error, .cmtx_error").fadeIn(2e3)}t.question&&jQuery("#cmtx_question").text(t.question),cmtxAutoScroll(jQuery("#cmtx_form_container"))}),a.fail(function(t,e,r){console&&console.log&&console.log(t.responseText)})}),jQuery("body").on("mouseenter",".cmtx_avatar_area",function(){jQuery(this).find(".cmtx_bio").stop(!0,!0).fadeIn(750)}),jQuery("body").on("mouseleave",".cmtx_avatar_area",function(){jQuery(this).find(".cmtx_bio").stop(!0,!0).fadeOut(500)}),navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&jQuery("body").on("mouseenter",".cmtx_bio",function(){jQuery(this).stop(!0,!0).fadeOut(500)}),jQuery("body").on("click",".cmtx_view_replies_link",function(t){t.preventDefault(),jQuery(this).parent().hide(),jQuery(this).closest(".cmtx_comment_box").next().fadeIn("slow")}),jQuery("#cmtx_container").on("change",".cmtx_sort_by_field",function(t){t.preventDefault(),cmtxRefreshComments({commentics_url:cmtx_js_settings_comments.commentics_url,page_id:cmtx_js_settings_comments.page_id,page_number:"",sort_by:jQuery(this).val(),search:cmtxGetSearchValue(),effect:!0})}),jQuery("#cmtx_container").on("focus",".cmtx_search",function(t){jQuery(this).addClass("cmtx_search_focus")}),jQuery("#cmtx_container").on("click",".cmtx_search_container .fa-search",function(t){t.preventDefault(),cmtxRefreshComments({commentics_url:cmtx_js_settings_comments.commentics_url,page_id:cmtx_js_settings_comments.page_id,page_number:"",sort_by:cmtxGetSortByValue(),search:jQuery(this).prev().val(),effect:!0})}),jQuery("#cmtx_container").on("keypress",".cmtx_search",function(t){13==t.which&&jQuery(this).next().trigger("click")}),jQuery("#cmtx_container").on("click",".cmtx_average_rating_can_rate label",function(t){t.preventDefault();var r=jQuery(this),e=jQuery(this).prev().val(),a=jQuery.ajax({type:"POST",cache:!1,url:cmtx_js_settings_comments.commentics_url+"frontend/index.php?route=part/average_rating/rate",data:"cmtx_page_id="+encodeURIComponent(cmtx_js_settings_comments.page_id)+"&cmtx_rating="+encodeURIComponent(e),dataType:"json"});a.done(function(t){if(t.success){jQuery(".cmtx_average_rating input").prop("checked",!1),jQuery(".cmtx_average_rating input[value="+t.average_rating+"]").prop("checked",!0),jQuery(".cmtx_average_rating_stat_rating, .cmtx_average_rating_stat_number").fadeOut(250,function(){jQuery(".cmtx_average_rating_stat_rating").text(t.average_rating).fadeIn(2e3),jQuery(".cmtx_average_rating_stat_number").text(t.num_of_ratings).fadeIn(2e3)}),jQuery(".cmtx_action_message_success").clearQueue(),jQuery(".cmtx_action_message_success").html(t.success),jQuery(".cmtx_action_message_success").fadeIn(500).delay(2e3).fadeOut(500);var e=r.offset();jQuery(".cmtx_action_message_success").offset({top:e.top-25,left:e.left+5})}if(t.error){jQuery(".cmtx_action_message_error").clearQueue(),jQuery(".cmtx_action_message_error").html(t.error),jQuery(".cmtx_action_message_error").fadeIn(500).delay(2e3).fadeOut(500);e=r.offset();jQuery(".cmtx_action_message_error").offset({top:e.top-25,left:e.left+5})}}),a.fail(function(t,e,r){console&&console.log&&console.log(t.responseText)})}),jQuery("#cmtx_container").on("click",".cmtx_average_rating_cannot_rate label",function(t){t.preventDefault()}),jQuery("#cmtx_container").on("click",".cmtx_pagination_url",function(t){t.preventDefault(),t.stopImmediatePropagation(),cmtxRefreshComments({commentics_url:cmtx_js_settings_comments.commentics_url,page_id:cmtx_js_settings_comments.page_id,page_number:jQuery(this).find("span").attr("data-cmtx-page"),sort_by:cmtxGetSortByValue(),search:cmtxGetSearchValue(),effect:!0})}),jQuery("#cmtx_container").on("click",".cmtx_notify_block a",function(t){t.preventDefault(),jQuery(".cmtx_message, .cmtx_error, .cmtx_subscribe_row").remove(),jQuery(".cmtx_field, .cmtx_rating").removeClass("cmtx_field_error"),jQuery(".cmtx_wait_for_user").show(),jQuery(".cmtx_icons_row, .cmtx_comment_row, .cmtx_counter_row, .cmtx_headline_row, .cmtx_upload_row, .cmtx_image_row, .cmtx_rating_row, .cmtx_website_row, .cmtx_geo_row, .cmtx_checkbox_container, .cmtx_button_row").hide(),jQuery(".cmtx_question_row, .cmtx_captcha_row").show(),""==jQuery('input[name="cmtx_subscribe"]').val()&&(cmtx_heading_text=jQuery(".cmtx_form_heading").text()),jQuery(".cmtx_form_heading").text(cmtx_js_settings_notify.lang_heading_notify);var e="";e+='<div class="cmtx_row cmtx_button_row cmtx_subscribe_row cmtx_clear">',e+='<div class="cmtx_col_2">',e+='<div class="cmtx_container cmtx_submit_button_container">',e+='<input type="button" id="cmtx_notify_button" class="cmtx_button cmtx_button_primary" value="'+cmtx_js_settings_notify.lang_button_notify+'" title="'+cmtx_js_settings_notify.lang_button_notify+'">',e+="</div>",e+="</div>",e+='<div class="cmtx_col_10"></div>',e+="</div>",jQuery(".cmtx_button_row").after(e),jQuery('input[name="cmtx_subscribe"]').val("1"),jQuery("#cmtx_form").before('<div class="cmtx_message cmtx_message_info cmtx_message_notify">'+cmtx_js_settings_notify.lang_text_notify_info+' <a href="#" title="'+cmtx_js_settings_notify.lang_title_cancel_notify+'">'+cmtx_js_settings_notify.lang_link_cancel+"</a></div>"),cmtxAutoScroll(jQuery("#cmtx_form_container")),jQuery(".cmtx_message_notify").fadeIn(1e3)}),jQuery("body").on("click",".cmtx_message_notify a",function(t){t.preventDefault(),n()}),jQuery("body").on("click","#cmtx_notify_button",function(t){t.preventDefault();var e=jQuery("#cmtx_form").find(":input:disabled").removeAttr("disabled"),r=jQuery("#cmtx_form").serialize();e.attr("disabled","disabled");var a=jQuery.ajax({type:"POST",cache:!1,url:cmtx_js_settings_comments.commentics_url+"frontend/index.php?route=part/notify/notify",data:r+"&cmtx_page_id="+encodeURIComponent(cmtx_js_settings_comments.page_id)+jQuery("#cmtx_hidden_data").val(),dataType:"json",beforeSend:function(){jQuery("#cmtx_notify_button").val(cmtx_js_settings_notify.lang_button_processing),jQuery("#cmtx_notify_button").prop("disabled",!0),jQuery("#cmtx_notify_button").addClass("cmtx_button_disabled")}});a.always(function(){jQuery("#cmtx_notify_button").val(cmtx_js_settings_notify.lang_button_notify),jQuery("#cmtx_notify_button").prop("disabled",!1),jQuery("#cmtx_notify_button").removeClass("cmtx_button_disabled")}),a.done(function(t){jQuery(".cmtx_message:not(.cmtx_message_notify), .cmtx_error").remove(),jQuery(".cmtx_field, .cmtx_rating").removeClass("cmtx_field_error"),t.result.success&&(jQuery("#cmtx_answer, #cmtx_captcha").val(""),jQuery("#cmtx_captcha_refresh").trigger("click"),"undefined"!=typeof grecaptcha&&grecaptcha.reset(),n(),jQuery("#cmtx_form").before('<div class="cmtx_message cmtx_message_success">'+t.result.success+"</div>"),jQuery(".cmtx_message_success").fadeIn(1500)),t.result.error&&(t.error.name&&(jQuery("#cmtx_name").addClass("cmtx_field_error"),jQuery("#cmtx_name").after('<span class="cmtx_error">'+t.error.name+"</span>")),t.error.email&&(jQuery("#cmtx_email").addClass("cmtx_field_error"),jQuery("#cmtx_email").after('<span class="cmtx_error">'+t.error.email+"</span>")),t.error.answer&&(jQuery("#cmtx_answer").addClass("cmtx_field_error"),jQuery("#cmtx_answer").after('<span class="cmtx_error">'+t.error.answer+"</span>")),t.error.recaptcha&&(jQuery("#g-recaptcha").after('<span class="cmtx_error">'+t.error.recaptcha+"</span>"),grecaptcha.reset()),t.error.captcha&&(jQuery("#cmtx_captcha").addClass("cmtx_field_error"),jQuery("#cmtx_captcha").after('<span class="cmtx_error">'+t.error.captcha+"</span>"),jQuery("#cmtx_captcha_refresh").trigger("click"),jQuery("#cmtx_captcha").val("")),jQuery("#cmtx_form").before('<div class="cmtx_message cmtx_message_error">'+t.result.error+"</div>"),jQuery(".cmtx_message_error, .cmtx_container_error, .cmtx_error").fadeIn(2e3)),t.question&&jQuery("#cmtx_question").text(t.question),cmtxAutoScroll(jQuery("#cmtx_form_container"))})}),jQuery("#cmtx_container").on("click",".cmtx_vote_link",function(t){t.preventDefault();var r=jQuery(this);if(jQuery(this).hasClass("cmtx_like_link"))var a="like";else a="dislike";var e=jQuery.ajax({type:"POST",cache:!1,url:cmtx_js_settings_comments.commentics_url+"frontend/index.php?route=main/comments/vote",data:"cmtx_comment_id="+encodeURIComponent(jQuery(this).closest(".cmtx_comment_box").attr("data-cmtx-comment-id"))+"&cmtx_type="+encodeURIComponent(a),dataType:"json"});e.done(function(t){if(t.success&&(r.find(".cmtx_vote_count").text(parseInt(r.find(".cmtx_vote_count").text(),10)+1),"like"==a?(r.find(".cmtx_vote_count").addClass("like_animation"),setTimeout(function(){jQuery(".cmtx_vote_count").removeClass("like_animation")},2e3)):(r.find(".cmtx_vote_count").addClass("dislike_animation"),setTimeout(function(){jQuery(".cmtx_vote_count").removeClass("dislike_animation")},2e3))),t.error){jQuery(".cmtx_action_message_error").clearQueue(),jQuery(".cmtx_action_message_error").html(t.error),jQuery(".cmtx_action_message_error").fadeIn(500).delay(2e3).fadeOut(500);var e=r.offset();jQuery(".cmtx_action_message_error").offset({top:e.top-25,left:e.left-45})}}),e.fail(function(t,e,r){console&&console.log&&console.log(t.responseText)})}),jQuery("#cmtx_container").on("click",".cmtx_share_link",function(t){t.preventDefault(),jQuery(".cmtx_share_box").hide();var e=jQuery(this),r=encodeURIComponent(jQuery(this).attr("data-cmtx-sharelink")),a=encodeURIComponent(jQuery(".cmtx_share_box").attr("data-cmtx-reference"));jQuery(".cmtx_share_digg").parent().attr("href","http://digg.com/submit?url="+r+"&title="+a),jQuery(".cmtx_share_facebook").parent().attr("href","https://www.facebook.com/sharer.php?u="+r),jQuery(".cmtx_share_linkedin").parent().attr("href","https://www.linkedin.com/shareArticle?mini=true&url="+r+"&title="+a),jQuery(".cmtx_share_reddit").parent().attr("href","https://reddit.com/submit?url="+r+"&title="+a),jQuery(".cmtx_share_twitter").parent().attr("href","https://twitter.com/intent/tweet?url="+r+"&text="+a),jQuery(".cmtx_share_weibo").parent().attr("href","http://service.weibo.com/share/share.php?url="+r+"&title="+a),jQuery(".cmtx_share_box").clearQueue(),jQuery(".cmtx_share_box").fadeIn(400);var n=e.offset();jQuery(".cmtx_share_box").offset({top:n.top-30,left:n.left-55})}),jQuery("body").on("click","#cmtx_flag_modal_yes",function(t){t.preventDefault();var e=jQuery(this).attr("data-cmtx-comment-id"),r=jQuery(".cmtx_comment_box[data-cmtx-comment-id="+e+"] .cmtx_flag_link"),a=jQuery.ajax({type:"POST",cache:!1,url:cmtx_js_settings_comments.commentics_url+"frontend/index.php?route=main/comments/flag",data:"cmtx_comment_id="+encodeURIComponent(e)+"&cmtx_page_id="+encodeURIComponent(cmtx_js_settings_comments.page_id),dataType:"json"});a.done(function(t){if(t.success){jQuery(".cmtx_action_message_success").clearQueue(),jQuery(".cmtx_action_message_success").html(t.success),jQuery(".cmtx_action_message_success").fadeIn(500).delay(2e3).fadeOut(500);var e=r.offset();jQuery(".cmtx_action_message_success").offset({top:e.top-25,left:e.left-100})}if(t.error){jQuery(".cmtx_action_message_error").clearQueue(),jQuery(".cmtx_action_message_error").html(t.error),jQuery(".cmtx_action_message_error").fadeIn(500).delay(2e3).fadeOut(500);e=r.offset();jQuery(".cmtx_action_message_error").offset({top:e.top-25,left:e.left-100})}}),a.fail(function(t,e,r){console&&console.log&&console.log(t.responseText)}),jQuery(".cmtx_modal_close").trigger("click")}),jQuery("#cmtx_container").on("click",".cmtx_permalink_link",function(t){t.preventDefault(),jQuery(".cmtx_permalink_box").hide();var e=jQuery(this),r=jQuery(this).attr("data-cmtx-permalink");jQuery("#cmtx_permalink").val(r),jQuery(".cmtx_permalink_box").clearQueue(),jQuery(".cmtx_permalink_box").fadeIn(400);var a=jQuery(".cmtx_permalink_box").width(),n=e.offset();jQuery(".cmtx_permalink_box").offset({top:n.top-70,left:n.left-a}),jQuery("#cmtx_permalink").select()}),jQuery("#cmtx_container").on("click",".cmtx_permalink_box a",function(t){t.preventDefault(),jQuery(".cmtx_permalink_box").fadeOut(400)}),jQuery("#cmtx_container").on("click",".cmtx_reply_link",function(t){t.preventDefault(),"1"==jQuery('input[name="cmtx_subscribe"]').val()&&jQuery(".cmtx_message_notify a").trigger("click"),jQuery(".cmtx_message_info").remove(),jQuery(".cmtx_icons_row, .cmtx_comment_row, .cmtx_counter_row, .cmtx_upload_row, .cmtx_website_row, .cmtx_geo_row, .cmtx_question_row, .cmtx_captcha_row, .cmtx_checkbox_container, .cmtx_button_row").show(),jQuery(".cmtx_headline_row, .cmtx_rating_row").hide(),jQuery("#cmtx_comment").addClass("cmtx_comment_field_active"),jQuery(".cmtx_comment_container").addClass("cmtx_comment_container_active");var e=jQuery(this).closest(".cmtx_comment_box").attr("data-cmtx-comment-id"),r=jQuery(this).closest(".cmtx_comment_box").find(".cmtx_name_text").text();jQuery('input[name="cmtx_reply_to"]').val(e),jQuery("#cmtx_form").before('<div class="cmtx_message cmtx_message_info cmtx_message_reply">'+cmtx_js_settings_comments.lang_text_replying_to+" "+r+' <a href="#" title="'+cmtx_js_settings_comments.lang_title_cancel_reply+'">'+cmtx_js_settings_comments.lang_link_cancel+"</a></div>"),cmtxAutoScroll(jQuery("#cmtx_form_container")),jQuery(".cmtx_message_reply").fadeIn(2e3)}),jQuery("body").on("click",".cmtx_message_reply a",function(t){t.preventDefault(),jQuery(".cmtx_headline_row, .cmtx_rating_row").show(),jQuery('input[name="cmtx_reply_to"]').val(""),jQuery(".cmtx_message_reply").text(cmtx_js_settings_comments.lang_text_not_replying)}),jQuery("#cmtx_container").on("click",".cmtx_comments_container .cmtx_upload_area a",function(t){var e=jQuery(this).find("img").attr("src");isInIframe?jQuery(this).attr("href",e):(t.preventDefault(),jQuery("#cmtx_lightbox_modal .cmtx_modal_body").html('<img src="'+e+'" class="cmtx_lightbox_image">'),jQuery("body").append(jQuery("#cmtx_lightbox_modal")),jQuery("body").append('<div class="cmtx_overlay"></div>'),jQuery(".cmtx_overlay").fadeIn(200),jQuery("#cmtx_lightbox_modal").fadeIn(200))}),jQuery("#cmtx_container").on("click","#cmtx_more_button",function(t){t.preventDefault(),jQuery("#cmtx_more_button").val(cmtx_js_settings_comments.lang_button_loading),jQuery("#cmtx_more_button").prop("disabled",!0),jQuery("#cmtx_more_button").addClass("cmtx_button_disabled");var e=parseInt(jQuery("#cmtx_next_page").val());jQuery("#cmtx_next_page").val(e+1),cmtxRefreshComments({commentics_url:cmtx_js_settings_comments.commentics_url,page_id:cmtx_js_settings_comments.page_id,page_number:e,sort_by:cmtxGetSortByValue(),search:cmtxGetSearchValue(),pagination:"button",effect:!1})}),jQuery("#cmtx_container").on("click",".cmtx_no_results a, .cmtx_return a",function(t){t.preventDefault(),jQuery("#cmtx_search").val(""),cmtx_js_settings_comments.is_permalink=!1,cmtxRefreshComments({commentics_url:cmtx_js_settings_comments.commentics_url,page_id:cmtx_js_settings_comments.page_id,page_number:"",sort_by:"",search:"",effect:!0})}),"undefined"!=typeof cmtx_js_settings_comments&&cmtx_js_settings_comments.show_pagination&&"infinite"==cmtx_js_settings_comments.pagination_type&&(isInIframe?window.addEventListener&&window.addEventListener("message",function(t){t.data&&"infinite_scroll"==t.data&&!cmtx_js_settings_comments.is_permalink&&cmtxInfiniteScrollIframe()},!1):jQuery(window).off("scroll",cmtxInfiniteScroll).on("scroll",cmtxInfiniteScroll)),cmtxViewReplies(),cmtxTimeago(),cmtxHighlightCode(),cmtxViewersOnline(),cmtxCloseShareBox(),cmtxClosePermalinkBox(),"undefined"!=typeof cmtx_js_settings_form){if(jQuery("#cmtx_admindetect_modal").length){if(jQuery("body").append(jQuery("#cmtx_admindetect_modal")),jQuery("body").append('<div class="cmtx_overlay"></div>'),isInIframe){var r=jQuery("#cmtx_container").offset();jQuery("#cmtx_admindetect_modal").css({top:r.top+130}),jQuery(".cmtx_overlay").css("background-color","transparent")}jQuery(".cmtx_overlay").fadeIn(200),jQuery("#cmtx_admindetect_modal").fadeIn(200)}jQuery("body").on("click","#cmtx_admindetect_modal_stop",function(t){t.preventDefault(),jQuery.ajax({url:cmtx_js_settings_form.commentics_url+"frontend/index.php?route=main/page/adminDetect"}),jQuery(".cmtx_modal_close").trigger("click")})}if("undefined"!=typeof cmtx_js_settings_user){jQuery("#cmtx_avatar_selection_link").click(function(t){t.preventDefault(),jQuery("body").append('<div class="cmtx_overlay"></div>'),jQuery(".cmtx_overlay").fadeIn(200),jQuery("#cmtx_avatar_selection_modal").fadeIn(200)}),jQuery(".cmtx_avatar_selection_img").click(function(t){t.preventDefault();var e=jQuery(this).attr("src");jQuery(".cmtx_avatar_image").attr("src",e),jQuery(".cmtx_avatar_image_links").show(),jQuery(".cmtx_modal_close").trigger("click")});jQuery("#cmtx_avatar_image_input").on("change",function(){!function(t){if(t.files&&t.files[0]){var e=new FileReader;e.onload=function(t){jQuery(".cmtx_avatar_image").attr("src",t.target.result)},e.readAsDataURL(t.files[0]),jQuery(".cmtx_avatar_image_links").show()}}(this)}),jQuery("#cmtx_avatar_upload_link").on("click",function(t){t.preventDefault(),jQuery("#cmtx_avatar_image_input").click()}),jQuery("#cmtx_avatar_save_link").on("click",function(t){t.preventDefault();var e=jQuery(".cmtx_avatar_image").attr("data-type"),r=new FormData;if(r.append("u-t",cmtx_js_settings_user.token),"selection"==e){r.append("avatar",jQuery(".cmtx_avatar_image").attr("src"));var a="saveSelectedAvatar"}else{r.append("avatar",jQuery("#cmtx_avatar_image_input")[0].files[0]);a="saveUploadedAvatar"}jQuery.ajax({type:"POST",cache:!1,url:cmtx_js_settings_user.commentics_url+"frontend/index.php?route=main/user/"+a,data:r,contentType:!1,processData:!1,dataType:"json",beforeSend:function(){jQuery(".cmtx_message").remove(),jQuery("form").before('<div class="cmtx_message cmtx_message_info">'+cmtx_js_settings_user.lang_text_saving+"</div>"),jQuery(".cmtx_message").show()}}).done(function(t){cmtxAutoScroll(jQuery(".cmtx_user_container")),setTimeout(function(){jQuery(".cmtx_message").remove(),t.success&&(jQuery("form").before('<div class="cmtx_message cmtx_message_success">'+t.success+"</div>"),jQuery(".cmtx_message").show(),jQuery(".cmtx_avatar_image_links").hide()),t.error&&(jQuery("form").before('<div class="cmtx_message cmtx_message_error">'+t.error+"</div>"),jQuery(".cmtx_message").show())},1e3)})}),cmtx_js_settings_user.to_all?jQuery("#cmtx_user_container .cmtx_notifications_area_custom").hide():jQuery("#cmtx_user_container .cmtx_notifications_area_custom").show(),jQuery('#cmtx_user_container input[name="to_all"]').on("change",function(){"1"==jQuery(this).val()?jQuery("#cmtx_user_container .cmtx_notifications_area_custom").fadeOut(500):jQuery("#cmtx_user_container .cmtx_notifications_area_custom").fadeIn(1e3)}),cmtxTimeago(),jQuery("#cmtx_user_container .cmtx_settings_container input").change(function(t){jQuery.ajax({type:"POST",cache:!1,url:cmtx_js_settings_user.commentics_url+"frontend/index.php?route=main/user/save",data:jQuery("form").serialize()+"&u-t="+encodeURIComponent(cmtx_js_settings_user.token),dataType:"json",beforeSend:function(){jQuery(".cmtx_message").remove(),jQuery("form").before('<div class="cmtx_message cmtx_message_info">'+cmtx_js_settings_user.lang_text_saving+"</div>"),jQuery(".cmtx_message").show()}}).done(function(t){cmtxAutoScroll(jQuery(".cmtx_user_container")),setTimeout(function(){jQuery(".cmtx_message").remove(),t.success&&(jQuery("form").before('<div class="cmtx_message cmtx_message_success">'+t.success+"</div>"),jQuery(".cmtx_message").show()),t.error&&(jQuery("form").before('<div class="cmtx_message cmtx_message_error">'+t.error+"</div>"),jQuery(".cmtx_message").show())},1e3)})}),jQuery("#cmtx_user_container .cmtx_trash_icon").click(function(t){var r=jQuery(this);jQuery.ajax({type:"POST",cache:!1,url:cmtx_js_settings_user.commentics_url+"frontend/index.php?route=main/user/deleteSubscription",data:"&u-t="+encodeURIComponent(cmtx_js_settings_user.token)+"&s-t="+encodeURIComponent(jQuery(r).attr("data-sub-token")),dataType:"json"}).done(function(t){if(jQuery(".cmtx_message").remove(),t.success)if(jQuery(r).parent().parent().remove(),jQuery(".count").text(t.count),"0"==t.count)jQuery("tbody").append('<tr><td class="cmtx_no_results" colspan="4">'+cmtx_js_settings_user.lang_text_no_results+"</td></tr>");else{var e=1;jQuery("tbody tr td:first-child").each(function(){jQuery(this).text(e),e++})}t.error&&(cmtxAutoScroll(jQuery(".cmtx_user_container")),jQuery("form").before('<div class="cmtx_message cmtx_message_error">'+t.error+"</div>"),jQuery(".cmtx_message").show())})}),jQuery("#cmtx_user_container .cmtx_delete_all").click(function(t){t.preventDefault(),jQuery.ajax({type:"POST",cache:!1,url:cmtx_js_settings_user.commentics_url+"frontend/index.php?route=main/user/deleteAllSubscriptions",data:"&u-t="+encodeURIComponent(cmtx_js_settings_user.token),dataType:"json"}).done(function(t){jQuery(".cmtx_message").remove(),t.success&&(jQuery(".count").text("0"),jQuery("tbody").html('<tr><td class="cmtx_no_results" colspan="4">'+cmtx_js_settings_user.lang_text_no_results+"</td></tr>")),t.error&&(cmtxAutoScroll(jQuery(".cmtx_user_container")),jQuery("form").before('<div class="cmtx_message cmtx_message_error">'+t.error+"</div>"),jQuery(".cmtx_message").show())})})}}))},100);function cmtxGetSortByValue(){var t=jQuery('select[name="cmtx_sort_by"]').val();return void 0===t&&(t=""),t}function cmtxGetSearchValue(){var t=jQuery('input[name="cmtx_search"]').val();return void 0===t&&(t=""),t}var scroll_timeout=null;function cmtxInfiniteScroll(){"1"==jQuery("#cmtx_loading_helper").attr("data-cmtx-load")&&(clearTimeout(scroll_timeout),scroll_timeout=setTimeout(function(){var t=Math.ceil(jQuery("#cmtx_loading_helper").offset().top);if(jQuery(window).height()+jQuery(this).scrollTop()>t){var e=parseInt(jQuery("#cmtx_next_page").val());jQuery("#cmtx_next_page").val(e+1),cmtxRefreshComments({commentics_url:cmtx_js_settings_comments.commentics_url,page_id:cmtx_js_settings_comments.page_id,page_number:e,sort_by:cmtxGetSortByValue(),search:cmtxGetSearchValue(),pagination:"infinite",effect:!1})}},200))}function cmtxInfiniteScrollIframe(t){if("1"==jQuery("#cmtx_loading_helper").attr("data-cmtx-load")){var e=parseInt(jQuery("#cmtx_next_page").val());jQuery("#cmtx_next_page").val(e+1),cmtxRefreshComments({commentics_url:cmtx_js_settings_comments.commentics_url,page_id:cmtx_js_settings_comments.page_id,page_number:e,sort_by:cmtxGetSortByValue(),search:cmtxGetSearchValue(),pagination:"infinite",effect:!1})}}function cmtxTimeago(){"undefined"!=typeof cmtx_js_settings_comments&&cmtx_js_settings_comments.date_auto&&(jQuery.timeago.settings.strings={suffixAgo:cmtx_js_settings_comments.timeago_suffixAgo,inPast:cmtx_js_settings_comments.timeago_inPast,seconds:cmtx_js_settings_comments.timeago_seconds,minute:cmtx_js_settings_comments.timeago_minute,minutes:cmtx_js_settings_comments.timeago_minutes,hour:cmtx_js_settings_comments.timeago_hour,hours:cmtx_js_settings_comments.timeago_hours,day:cmtx_js_settings_comments.timeago_day,days:cmtx_js_settings_comments.timeago_days,month:cmtx_js_settings_comments.timeago_month,months:cmtx_js_settings_comments.timeago_months,year:cmtx_js_settings_comments.timeago_year,years:cmtx_js_settings_comments.timeago_years},jQuery(".cmtx_date_area .timeago").timeago()),"undefined"!=typeof cmtx_js_settings_user&&(jQuery.timeago.settings.strings={suffixAgo:cmtx_js_settings_user.timeago_suffixAgo,inPast:cmtx_js_settings_user.timeago_inPast,seconds:cmtx_js_settings_user.timeago_seconds,minute:cmtx_js_settings_user.timeago_minute,minutes:cmtx_js_settings_user.timeago_minutes,hour:cmtx_js_settings_user.timeago_hour,hours:cmtx_js_settings_user.timeago_hours,day:cmtx_js_settings_user.timeago_day,days:cmtx_js_settings_user.timeago_days,month:cmtx_js_settings_user.timeago_month,months:cmtx_js_settings_user.timeago_months,year:cmtx_js_settings_user.timeago_year,years:cmtx_js_settings_user.timeago_years},jQuery("#cmtx_user_container .timeago").timeago())}function cmtxHighlightCode(){"undefined"!=typeof hljs&&void 0!==hljs.highlightBlock&&jQuery(".cmtx_code_box, .cmtx_php_box").each(function(t,e){hljs.highlightBlock(e)})}function cmtxViewersOnline(){"undefined"!=typeof cmtx_js_settings_online&&cmtx_js_settings_online.online_refresh_enabled&&setInterval(function(){var t=jQuery.ajax({type:"POST",cache:!1,url:cmtx_js_settings_online.commentics_url+"frontend/index.php?route=part/online/refresh",data:"cmtx_page_id="+encodeURIComponent(cmtx_js_settings_online.page_id),dataType:"json"});t.done(function(t){"undefined"!=t.online&&jQuery(".cmtx_online_num").first().text()!=t.online&&jQuery(".cmtx_online_num").fadeOut(function(){jQuery(".cmtx_online_num").text(t.online).fadeIn()})}),t.fail(function(t,e,r){console&&console.log&&console.log(t.responseText)})},cmtx_js_settings_online.online_refresh_interval)}function cmtxViewReplies(){"undefined"!=typeof cmtx_js_settings_comments&&jQuery(".cmtx_reply_counter").each(function(){var t=jQuery(this).text();if(t){if(1==t)var e=cmtx_js_settings_comments.lang_text_view+' <span class="cmtx_reply_num">1</span> '+cmtx_js_settings_comments.lang_text_reply;else e=cmtx_js_settings_comments.lang_text_view+' <span class="cmtx_reply_num">'+t+"</span> "+cmtx_js_settings_comments.lang_text_replies;jQuery(this).closest(".cmtx_comment_section").find(".cmtx_view_replies_link").html('<i class="fa fa-commenting-o" aria-hidden="true"></i> '+e)}})}function cmtxCloseShareBox(){jQuery(".cmtx_share_box").length&&jQuery(document).mouseup(function(t){var e=jQuery(".cmtx_share_box");e.is(t.target)||0!==e.has(t.target).length||e.fadeOut(400)})}function cmtxClosePermalinkBox(){jQuery(".cmtx_permalink_box").length&&jQuery(document).mouseup(function(t){var e=jQuery(".cmtx_permalink_box");e.is(t.target)||0!==e.has(t.target).length||e.fadeOut(400)})}function cmtxAutoScroll(e){try{e[0].scrollIntoView({behavior:"smooth",block:"start"})}catch(t){e[0].scrollIntoView(!0)}}function cmtxUpdateCommentCounter(){if(jQuery("#cmtx_comment").length){var t=jQuery("#cmtx_comment").val().length,e=jQuery("#cmtx_comment").attr("maxlength");jQuery("#cmtx_counter").html(e-t)}}function cmtx_add_tag(t,e){var r=document.getElementById("cmtx_comment");if(jQuery("#cmtx_comment").focus(),document.selection&&document.selection.createRange)selection=document.selection.createRange(),selection.parentElement()==r&&(selection.text=t+selection.text+e);else if(void 0!==r){var a=jQuery("#cmtx_comment").val().length,n=r.selectionStart,c=r.selectionEnd;jQuery("#cmtx_comment").val(r.value.substring(0,n)+t+r.value.substring(n,c)+e+r.value.substring(c,a))}else jQuery("#cmtx_comment").val(t+e);cmtxUpdateCommentCounter(),jQuery("#cmtx_comment").focus()}function cmtxRefreshComments(r){var t=jQuery.ajax({type:"POST",cache:!1,url:r.commentics_url+"frontend/index.php?route=main/comments/getComments",data:"cmtx_page_id="+encodeURIComponent(r.page_id)+"&cmtx_sort_by="+encodeURIComponent(r.sort_by)+"&cmtx_search="+encodeURIComponent(r.search)+"&cmtx_page="+encodeURIComponent(r.page_number),dataType:"json",beforeSend:function(){r.effect&&(jQuery(".cmtx_loading_icon").show(),jQuery("body").addClass("cmtx_loading_body"))}});t.always(function(){r.effect&&(jQuery(".cmtx_loading_icon").hide(),jQuery("body").removeClass("cmtx_loading_body"))}),t.done(function(t){if(t.result){if("button"==r.pagination||"infinite"==r.pagination){var e=jQuery(".cmtx_comment_boxes",jQuery(t.result)).html();jQuery(".cmtx_comment_boxes").append(e),jQuery("#cmtx_more_button").val(cmtx_js_settings_comments.lang_button_more),jQuery("#cmtx_more_button").prop("disabled",!1),jQuery("#cmtx_more_button").removeClass("cmtx_button_disabled"),parseInt(jQuery("#cmtx_loading_helper").attr("data-cmtx-total-comments"))>jQuery(".cmtx_comment_section").length||(jQuery("#cmtx_more_button").remove(),jQuery("#cmtx_loading_helper").attr("data-cmtx-load","0"))}else jQuery(".cmtx_comments_section").html(t.result);""!=jQuery("#cmtx_search").val()&&jQuery("#cmtx_search").addClass("cmtx_search_focus"),jQuery("#cmtx_js_settings_comments").length&&(cmtx_js_settings_comments=JSON.parse(jQuery("#cmtx_js_settings_comments").text())),jQuery("#cmtx_js_settings_notify").length&&(cmtx_js_settings_notify=JSON.parse(jQuery("#cmtx_js_settings_notify").text())),jQuery("#cmtx_js_settings_online").length&&(cmtx_js_settings_online=JSON.parse(jQuery("#cmtx_js_settings_online").text())),cmtxViewReplies(),cmtxTimeago(),cmtxHighlightCode(),cmtxViewersOnline(),cmtxCloseShareBox(),cmtxClosePermalinkBox()}}),t.fail(function(t,e,r){console&&console.log&&console.log(t.responseText)})}function cmtxTrim(t){return t.trim(t)}void 0!==window.iFrameResizer&&null!=window.iFrameResizer&&(window.iFrameResizer={messageCallback:function(t){console.log("test"),console.log(t)}});